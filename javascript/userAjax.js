function changeUrl(t){history.pushState("object or string","Title",t)}function getPage(t,a,e){var n=new XMLHttpRequest;n.open("POST",t,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onprogress=function(t){$(".ajaxReplace").addClass("loading");var a=t.loaded/t.total*100;$(".loading:before").css({width:a+"%"})},n.onload=function(){if(!(n.status>=200&&n.status<400))return alert("Unexpected status code "+n.status+" for "+t),!1;e(n.response)},n.onerror=function(){e("error before seding")},n.send(a)}function ajax(t,a,e,n,i,o){var d=new XMLHttpRequest,s=ajaxFile+"?ajaxAction="+a+"&ajaxId="+e;d.onerror=function(){},d.open(t,s),d.onload=function(){d.status>=200&&d.status},d.send()}function addWatchList(){dataId=$(this).attr("data-id"),ajax("POST","addWatchList",dataId,"","",$(".addWatchList").removeClass("addWatchList").addClass("removeWatchList"))}function removeWatchList(){dataId=$(this).attr("data-id"),ajax("POST","removeWatchList",dataId,"","",$(".removeWatchList").removeClass("removeWatchList").addClass("addWatchList"))}function addWatchListIndex(){var t=$(this);dataId=$(this).attr("data-id");var a=new XMLHttpRequest,e=ajaxFile+"?ajaxAction=addWatchList&ajaxId="+dataId;a.onerror=function(){alert("Error")},a.open("POST",e),a.onload=function(){var e=JSON.parse(this.responseText);if(a.status>=200&&a.status<400){if(0==$("#watchListDiv").length&&$(".mainSection").prepend('<article id="watchListDiv" class="contentContainer"><p class="contentDivHeader">'+e.title+'</p><div class="contentDiv"><div class="contentGroupScroll"></div></div></article>'),"movie"==t.attr("data-type"))n="movies";else if("serie"==t.attr("data-type"))var n="series";t.removeClass("addWatchList").addClass("removeWatchList"),$("#watchListDiv .contentGroupScroll").prepend('<div class="content" data-id="'+t.attr("data-id")+'"><a class="contentLink" href="'+baseUrl+"title?id="+t.attr("data-id")+'"><figure class="contentFigure"><img src="/joker/images/media/'+n+"/"+t.attr("data-id")+'/image.jpg"/><figcaption></figcaption></figure></a><div class="removeWatchList" data-type="'+n+'" data-id="'+t.attr("data-id")+'"></div></div>'),$('.contentDiv div .addWatchList[data-id="'+t.attr("data-id")+'"]').removeClass("addWatchList").addClass("removeWatchList"),$('#imageDiv div span[data-id="'+t.attr("data-id")+'"]').removeClass("addWatchList").addClass("removeWatchList"),$("#contentSortcuts").find(".addWatchList").removeClass("addWatchList").addClass("removeWatchList")}else alert("Error")},a.send()}function removeWatchListIndex(){var t=$(this);dataId=$(this).attr("data-id");var a=new XMLHttpRequest,e=ajaxFile+"?ajaxAction=removeWatchList&ajaxId="+dataId;a.onerror=function(){alert("Error")},a.open("POST",e),a.onload=function(){a.status>=200&&a.status<400?($('#watchListDiv div[data-id="'+t.attr("data-id")+'"]').remove(),$('.contentDiv div .removeWatchList[data-id="'+t.attr("data-id")+'"]').removeClass("removeWatchList").addClass("addWatchList"),$('#imageDiv span[data-id="'+t.attr("data-id")+'"]').removeClass("removeWatchList").addClass("addWatchList"),$("#contentSortcuts").find(".removeWatchList").removeClass("removeWatchList").addClass("addWatchList"),""==$.trim($("#watchListDiv .contentGroupScroll").html())&&$("#watchListDiv").remove()):alert("Error")},a.send()}function followUser(){var t=$(this),a=new XMLHttpRequest;a.open("POST",ajaxFile+"?ajaxAction=follow&ajaxId="+$(t).attr("data-id")),a.onerror=function(){alert("Error")},a.onload=function(){var a=JSON.parse(this.responseText);$(t).attr("id",a.change),$(t).find(".buttonSpan").html(a.write)},a.send()}function unfollowUser(){var t=$(this),a=new XMLHttpRequest;a.open("POST",ajaxFile+"?ajaxAction=unfollow&ajaxId="+$(t).attr("data-id")),a.onerror=function(){alert("Error")},a.onload=function(){var a=JSON.parse(this.responseText);$(t).attr("id",a.change),$(t).find(".buttonSpan").html(a.write)},a.send()}function makeComment(){var t=$("#commentInput").val();if(""==t.trim())alert("Type a comment");else{var a=$(this),e=new XMLHttpRequest;e.open("POST",ajaxFile+"?ajaxAction=makeComment&ajaxId="+a.attr("data-id")),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onerror=function(){alert("Comment not made")},e.onload=function(){$("#commentsDiv #commentFormDiv").remove(),$("#commentsDiv").prepend('<div id="userComment"><img src="'+baseUrl+"images/user/"+a.attr("data-userid")+'/profile.jpg"/><div id="rightDiv"><div id="commentSpanDiv"><span id="commentSpan">'+t+'</span></div><div id="commentOptionsDiv"><div id="buttonEdit" class="button" data-id="'+a.attr("data-id")+'"></div><div id="buttonDelete" class="button" data-userid="'+a.attr("data-userid")+'" data-id="'+a.attr("data-id")+'"></div></div></div></div>'),$("#userComment").on("click","#buttonDelete",deleteComment)},e.send("comment="+t)}}function editComment(){alert("Comming soon")}function deleteComment(){var t=$(this),a=new XMLHttpRequest;a.open("POST",ajaxFile+"?ajaxAction=deleteComment&ajaxId="+t.attr("data-id")),a.onerror=function(){alert("Comment not deleted")},a.onload=function(){$("#commentsDiv #userComment").remove(),$("#commentsDiv").prepend('<div id="commentFormDiv"><textarea cols="10" rows="3" max-cols="10" id="commentInput" placeholder="Leave your comment"></textarea><div id="buttonsDiv"><button id="commentSubmit" data-userid="'+t.attr("data-userid")+'" data-id="'+t.attr("data-id")+'" disabled="disabled">Comentar</button></div></div>'),$("#commentFormDiv").on("click","#commentSubmit",makeComment),disableEnable()},a.send()}function showDetails(t){t.preventDefault(),contentLink=$(this).find(".contentLink").attr("href"),contentLinkToBack=$(this).find(".contentLink").attr("data-url"),contentTitleToBack=$(this).find(".contentLink").attr("data-title"),$(".closeButton").attr("data-url",contentLinkToBack),$(".closeButton").attr("data-title",contentTitleToBack);var a=$(".contentContainer .titleDetailsOpen"),e=$(".contentContainer .contentDiv .contentOpen"),n=$(this).parent(),i=n.parent().parent();a.find(".sectionContent article").remove(),a.removeClass("titleDetailsOpen").addClass("titleDetails"),e.removeClass("contentOpen").addClass("content"),$(this).removeClass("content").addClass("contentOpen"),i.find(".titleDetails").removeClass("titleDetails").addClass("titleDetailsOpen"),"contentGroup"==n.attr("class")&&$("html, body").animate({scrollTop:i.find(".titleDetailsOpen").offset().top-150},500),getPage(contentLink,"body=true",function(t){var a=$(t).children();$(".titleDetailsOpen").find(".sectionContent").html(a),changeUrl(contentLink)})}function closeDetails(){var t=$(this).parent().parent().parent(),a=$(".contentContainer .titleDetailsOpen"),e=$(".contentContainer .contentDiv div"),n=t.offset().top,i=$(this).attr("data-url"),o=$(this).attr("data-title");$("html, body").animate({scrollTop:n},500,function(){a.removeClass("titleDetailsOpen").addClass("titleDetails"),$(".titleDetails").find(".sectionContent article").remove(),$(".titleDetailsOpen").find(".sectionContent article").remove(),e.find(".contentOpen").removeClass("contentOpen").addClass("content"),changeUrl(i),$("title").empty().text(o)})}function ajaxLink(t,a){if(t.preventDefault(),void 0!=a)e=a;else var e=$(this).attr("href");$(document).off("scroll"),getPage(e,"body=true",function(t){$(".ajaxReplace").html(t),$("html, body").animate({scrollTop:0},500),changeUrl(e),$("#menuBtInput").prop("checked",!1),e==baseUrl&&clearInterval(intervalId)})}var ajaxFile="ajax/ajaxRequisitions.php";