$(document).ready(function(){$(window).on("scroll",function(){var e=$("#topDiv");$(this).scrollTop()>=300?e.removeClass("topDiv").addClass("topDivFixed"):e.removeClass("topDivFixed").addClass("topDiv")}),$("#footer").on("click","#topDiv",function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},500)});new Index});var Config=function(){return function(){this.baseUrl=$("head").attr("data-url"),this.cookieId=$("head").attr("data-cookie")}}();$(document).ready(function(){$("body > section").ready(function(){$(".interface").css("min-height",$(document).height()-70+"px")}),$("#header").on("click","#settingsOpen",function(){$("#configBar").toggleClass("configBarOpen")})});var Index=function(){return function(){var e=new Parallax,t=new Slide,a=new Watchlist,n=new Details,o=new UserOthers;$(document).on("scroll",function(){e.parallaxHome()}),o.tabSelect(!0),$("#contentSlider #changeDiv").length&&t.changeIndex("#contentSlider"),$("#imageDiv div").on("click",".addWatchList",a.addWatchListIndex),$("#imageDiv div").on("click",".removeWatchList",a.removeWatchListIndex),$(".contentGroupScroll").on("click",".content .addWatchList",a.addWatchListIndex),$(".contentGroupScroll").on("click",".content .removeWatchList",a.removeWatchListIndex),$(".contentGroupScroll").on("click",".content",n.showDetails),$(".contentContainer").on("click",".closeButton",n.closeDetails)}}();$(document).ready(function(){var e=new UserOthers;(new Login).inputError(".userDiv"),e.closeMessage(".userError","#errorMsgClose")});var AdminMenu=function(){function e(){}return e.prototype.toggleMenu=function(e){$(e).on("click",".closeMenu",function(){$(this).removeClass("closeMenu").addClass("openMenu"),$(".menuOpened").removeClass("menuOpened").addClass("menuClosed"),$("section[id$='Interface']").removeClass("bodyMenuOpened").addClass("bodyMenuClosed")}),$(e).on("click",".openMenu",function(){$(this).removeClass("openMenu").addClass("closeMenu"),$(".menuClosed").removeClass("menuClosed").addClass("menuOpened"),$("section[id$='Interface']").removeClass("bodyMenuClosed").addClass("bodyMenuOpened")})},e.prototype.menuAccordion=function(e){$(e).find("#ulMenu > .itemMenu > .subMenuItems").hide(),$(e).on("click","#ulMenu .itemMenuOpen",function(){$(this).find(".subMenuItems").slideUp("normal"),$(this).removeClass("itemMenuOpen").addClass("itemMenuClose")}),$(e).on("click","#ulMenu .itemMenuClose",function(){$("#ulMenu > li").find(".subMenuItems").slideUp("normal"),$("#ulMenu > li").next().removeClass("itemMenuOpen").addClass("itemMenuClose"),$(this).removeClass("itemMenuClose").addClass("itemMenuOpen"),$(this).find(".subMenuItems").slideDown("normal")})},e}(),AdminOthers=function(){function e(){}return e.prototype.advancedOptions=function(e,t){$(e).on("click",".searchAdvancedClose",function(){$(this).removeClass("searchAdvancedClose").addClass("searchAdvancedOpen"),$(t).removeClass("advancedSearchHide").addClass("advancedSearchShow")}),$(e).on("click",".searchAdvancedOpen",function(){$(this).removeClass("searchAdvancedOpen").addClass("searchAdvancedClose"),$(t).removeClass("advancedSearchShow").addClass("advancedSearchHide")})},e.prototype.showSelectedFile=function(e){$(e).on("change",".inputImage",function(){var e=$(this),t=e.prop("files"),a=new FileReader;a.addEventListener("load",function(){var t=a.result;e.next(".fileInputLabel").removeClass("fileInputLabel").addClass("selectedInputLabel"),e.next(".selectedInputLabel").find("img").attr("src",t)}),a.readAsDataURL(t[0])}).on("change",".inputVideo",function(){var e=$(this).prop("files"),t=new FileReader,a=new Blob([e[0]],{type:e.type}),n=document.getElementById("selectedVideo"),o=(URL||webkitURL).createObjectURL(a);n.src=o,t.readAsArrayBuffer(e[0])})},e}(),Ajax=function(){function e(){this.ajaxFile="ajax/ajaxRequisitions.php"}return e.prototype.changeUrl=function(e){history.pushState({},"",e)},e.prototype.getPage=function(e,t,a){var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onprogress=function(e){$(".ajaxReplace").addClass("loading");var t=e.loaded/e.total*100;$(".loading:before").css({width:t+"%"})},n.onload=function(){if(!(n.status>=200&&n.status<400))return alert("Unexpected status code "+n.status+" for "+e),!1;a(n.response)},n.onerror=function(){a("error before seding")},n.send(t)},e.prototype.ajax=function(e,t,a,n,o,s){var i=new XMLHttpRequest,d=this.ajaxFile+"?ajaxAction="+t+"&ajaxId="+a;i.onerror=function(){},i.open(e,d),i.onload=function(){i.status>=200&&i.status},i.send()},e}(),__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),Comments=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.makeComment=function(){var e=$("#commentInput").val();if(""==e.trim())alert("Type a comment");else{var t=$(this),a=new XMLHttpRequest;a.open("POST",this.ajaxFile+"?ajaxAction=makeComment&ajaxId="+t.attr("data-id")),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onerror=function(){alert("Comment not made")},a.onload=function(){$("#commentsDiv #commentFormDiv").remove(),$("#commentsDiv").prepend('<div id="userComment"><img src="'+baseUrl+"images/user/"+t.attr("data-userid")+'/profile.jpg"/><div id="rightDiv"><div id="commentSpanDiv"><span id="commentSpan">'+e+'</span></div><div id="commentOptionsDiv"><div id="buttonEdit" class="button" data-id="'+t.attr("data-id")+'"></div><div id="buttonDelete" class="button" data-userid="'+t.attr("data-userid")+'" data-id="'+t.attr("data-id")+'"></div></div></div></div>'),$("#userComment").on("click","#buttonDelete",this.deleteComment())},a.send("comment="+e)}},t.prototype.editComment=function(){alert("Comming soon")},t.prototype.deleteComment=function(){var e=$(this),t=new XMLHttpRequest;t.open("POST",this.ajaxFile+"?ajaxAction=deleteComment&ajaxId="+e.attr("data-id")),t.onerror=function(){alert("Comment not deleted")},t.onload=function(){$("#commentsDiv #userComment").remove(),$("#commentsDiv").prepend('<div id="commentFormDiv"><textarea cols="10" rows="3" max-cols="10" id="commentInput" placeholder="Leave your comment"></textarea><div id="buttonsDiv"><button id="commentSubmit" data-userid="'+e.attr("data-userid")+'" data-id="'+e.attr("data-id")+'" disabled="disabled">Comentar</button></div></div>'),$("#commentFormDiv").on("click","#commentSubmit",this.makeComment()),this.disableEnable()},t.send()},t}(Ajax),Details=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.showDetails=function(t){t.preventDefault();var a=$(this).find(".contentLink").attr("href"),n=$(this).find(".contentLink").attr("data-url"),o=$(this).find(".contentLink").attr("data-title");$(".closeButton").attr("data-url",n),$(".closeButton").attr("data-title",o);var s=$(".contentContainer .titleDetailsOpen"),i=$(".contentContainer .contentDiv .contentOpen"),d=$(this).parent(),r=d.parent().parent();s.find(".sectionContent article").remove(),s.removeClass("titleDetailsOpen").addClass("titleDetails"),i.removeClass("contentOpen").addClass("content"),$(this).removeClass("content").addClass("contentOpen"),r.find(".titleDetails").removeClass("titleDetails").addClass("titleDetailsOpen"),"contentGroup"==d.attr("class")&&$("html, body").animate({scrollTop:r.find(".titleDetailsOpen").offset().top-150},500),e.prototype.getPage.call(this,a,"body=true",function(e){var t=$(e).children();$(".titleDetailsOpen").find(".sectionContent").html(t)}),e.prototype.changeUrl.call(this,a)},t.prototype.closeDetails=function(){var t=$(this).parent().parent().parent(),a=$(".contentContainer .titleDetailsOpen"),n=$(".contentContainer .contentDiv div"),o=t.offset().top,s=$(this).attr("data-url"),i=$(this).attr("data-title");$("html, body").animate({scrollTop:o},500,function(){a.removeClass("titleDetailsOpen").addClass("titleDetails"),$(".titleDetails").find(".sectionContent article").remove(),$(".titleDetailsOpen").find(".sectionContent article").remove(),n.find(".contentOpen").removeClass("contentOpen").addClass("content"),$("title").empty().text(i)}),e.prototype.changeUrl.call(this,s)},t}(Ajax),Follow=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.followUser=function(){var e=$(this),t=new XMLHttpRequest;t.open("POST",this.ajaxFile+"?ajaxAction=follow&ajaxId="+$(e).attr("data-id")),t.onerror=function(){alert("Error")},t.onload=function(){var t=JSON.parse(this.responseText);$(e).attr("id",t.change),$(e).find(".buttonSpan").html(t.write)},t.send()},t.prototype.unfollowUser=function(){var e=$(this),t=new XMLHttpRequest;t.open("POST",this.ajaxFile+"?ajaxAction=unfollow&ajaxId="+$(e).attr("data-id")),t.onerror=function(){alert("Error")},t.onload=function(){var t=JSON.parse(this.responseText);$(e).attr("id",t.change),$(e).find(".buttonSpan").html(t.write)},t.send()},t.prototype.ajaxLink=function(e,t){if(e.preventDefault(),void 0!=t)a=t;else var a=$(this).attr("href");$(document).off("scroll"),this.getPage(a,"body=true",function(e){$(".ajaxReplace").html(e),$("html, body").animate({scrollTop:0},500),this.changeUrl(a),$("#menuBtInput").prop("checked",!1),a==baseUrl&&clearInterval(intervalId)})},t}(Ajax),Watchlist=function(){function e(){}return e.prototype.addWatchList=function(){var e=$(this).attr("data-id");this.ajax("POST","addWatchList",e,"","",$(".addWatchList").removeClass("addWatchList").addClass("removeWatchList"))},e.prototype.removeWatchList=function(){var e=$(this).attr("data-id");this.ajax("POST","removeWatchList",e,"","",$(".removeWatchList").removeClass("removeWatchList").addClass("addWatchList"))},e.prototype.addWatchListIndex=function(){var e=$(this),t=$(this).attr("data-id"),a=new XMLHttpRequest,n=this.ajaxFile+"?ajaxAction=addWatchList&ajaxId="+t;a.onerror=function(){alert("Error")},a.open("POST",n),a.onload=function(){var t=JSON.parse(this.responseText);if(a.status>=200&&a.status<400){if(0==$("#watchListDiv").length&&$(".mainSection").prepend('<article id="watchListDiv" class="contentContainer"><p class="contentDivHeader">'+t.title+'</p><div class="contentDiv"><div class="contentGroupScroll"></div></div></article>'),"movie"==e.attr("data-type"))n="movies";else if("serie"==e.attr("data-type"))var n="series";e.removeClass("addWatchList").addClass("removeWatchList"),$("#watchListDiv .contentGroupScroll").prepend('<div class="content" data-id="'+e.attr("data-id")+'"><a class="contentLink" href="'+baseUrl+"title?id="+e.attr("data-id")+'"><figure class="contentFigure"><img src="/joker/images/media/'+n+"/"+e.attr("data-id")+'/image.jpg"/><figcaption></figcaption></figure></a><div class="removeWatchList" data-type="'+n+'" data-id="'+e.attr("data-id")+'"></div></div>'),$('.contentDiv div .addWatchList[data-id="'+e.attr("data-id")+'"]').removeClass("addWatchList").addClass("removeWatchList"),$('#imageDiv div span[data-id="'+e.attr("data-id")+'"]').removeClass("addWatchList").addClass("removeWatchList"),$("#contentSortcuts").find(".addWatchList").removeClass("addWatchList").addClass("removeWatchList")}else alert("Error")},a.send()},e.prototype.removeWatchListIndex=function(){var e=$(this),t=$(this).attr("data-id"),a=new XMLHttpRequest,n=this.ajaxFile+"?ajaxAction=removeWatchList&ajaxId="+t;a.onerror=function(){alert("Error")},a.open("POST",n),a.onload=function(){a.status>=200&&a.status<400?($('#watchListDiv div[data-id="'+e.attr("data-id")+'"]').remove(),$('.contentDiv div .removeWatchList[data-id="'+e.attr("data-id")+'"]').removeClass("removeWatchList").addClass("addWatchList"),$('#imageDiv span[data-id="'+e.attr("data-id")+'"]').removeClass("removeWatchList").addClass("addWatchList"),$("#contentSortcuts").find(".removeWatchList").removeClass("removeWatchList").addClass("addWatchList"),""==$.trim($("#watchListDiv .contentGroupScroll").html())&&$("#watchListDiv").remove()):alert("Error")},a.send()},e}(),Login=function(){function e(){}return e.prototype.inputError=function(e){$(e).on("focusout",".inputText",function(){$(this).val().length<1&&$(this).removeClass("inputText").addClass("inputTextError")}),$(e).on("focusout",".inputTextError",function(){$(this).val().length>=1&&$(this).removeClass("inputTextError").addClass("inputText")})},e.prototype.secureLogoff=function(e){document.cookie.match("login")||location.replace(e+"logoff")},e}(),UserOthers=function(){function e(){}return e.prototype.hideReply=function(e){$(e).on("click",".noHide",function(){$(this).removeClass("noHide").addClass("hide")}).on("click",".hide",function(){$(this).removeClass("hide").addClass("noHide")})},e.prototype.closeMessage=function(e,t){$(e).on("click",t,function(){$(this).parent().remove()})},e.prototype.tabSelect=function(e){var t=e||!1;$("#tabHeader").on("click",".tab",function(){$("#tabHeader .tabSelected").removeClass("tabSelected").addClass("tab"),$(this).removeClass("tab").addClass("tabSelected");var e=$(this).index();e++,$("#tabContents .contentShow").removeClass("contentShow").addClass("contentHide"),$("#tabContents .contentHide:nth-of-type("+e+")").removeClass("contentHide").addClass("contentShow")}).on("click","div",function(e){1==t&&(e.preventDefault(),$("html, body").animate({scrollTop:450},500))})},e.prototype.episodeSelect=function(e){$(e).on("click",".seasonSelect .seasonSpan",function(){$("#seasonSelect").removeClass("seasonSelect").addClass("seasonSelectOpen"),$(".seasonHide").removeClass("seasonHide").addClass("seasonShow")}).on("click",".seasonSelectOpen .seasonSpan",function(){$("#seasonSelect").removeClass("seasonSelectOpen").addClass("seasonSelect"),$(".seasonShow").removeClass("seasonShow").addClass("seasonHide");$(this).parent().removeClass("seasonHide").addClass("seasonShow");var e=$(this).parent().index();e++,$("#episodeDiv .seasonGroupShow").removeClass("seasonGroupShow").addClass("seasonGroupHide"),$("#episodeDiv .contentGroup:nth-of-type("+e+")").removeClass("seasonGroupHide").addClass("seasonGroupShow"),$("#episodeDiv .contentGroup:nth-of-type("+e+")").width()>$("#episodeDiv").width()?$("#episodeDiv").find(".nextHide").removeClass("nextHide").addClass("nextShow"):$("#episodeDiv").find(".nextShow").removeClass("nextShow").addClass("nextHide")}),$(e).on("mouseleave",".seasonSelectOpen",function(){var e=$("#episodeDiv .seasonGroupShow").index();e++,$("#seasonSelect").removeClass("seasonSelectOpen").addClass("seasonSelect"),$(".seasonShow").removeClass("seasonShow").addClass("seasonHide"),$(".seasonHide:nth-of-type("+e+")").removeClass("seasonHide").addClass("seasonShow")})},e.prototype.disableEnable=function(){$("#commentInput").keyup(function(){""==$(this).val().trim()?$("#commentSubmit").attr("disabled"):$("#commentSubmit").removeAttr("disabled")})},e}(),Parallax=function(){function e(){}return e.prototype.parallaxHome=function(){$(document).scrollTop()<450&&($("#descImage > img").css("top",window.pageYOffset/2+"px"),$("#contentSlider > article > div > img").css("top",window.pageYOffset/2+"px"))},e.prototype.parallaxHeaderUser=function(){var e=$("#userHeaderImg");$(this).scrollTop()<210&&$(e).css("top",window.pageYOffset/2.6+"px");var t=$("#userHeader"),a=$("#userHeaderImg");$(this).scrollTop()>=210?(t.removeClass("userHeader"),t.addClass("userHeaderFixed"),a.removeClass("userHeaderImg"),a.addClass("userHeaderImgFixed")):(t.removeClass("userHeaderFixed"),t.addClass("userHeader"),a.removeClass("userHeaderImgFixed"),a.addClass("userHeaderImg"))},e.prototype.parallaxImg=function(){var e=document.getElementById("userImgFigure");$(this).scrollTop()<210&&(e.style.width=150-$(this).scrollTop()/2.1+"px",e.style.height=150-$(this).scrollTop()/2.1+"px",e.style.left=0+$(this).scrollTop()/4.2+"px",e.style.top=$(this).scrollTop()/5.2-120+"px");var t=$("#userImgFigure");$(this).scrollTop()>=210?(t.removeClass("userImgFigure"),t.addClass("userImgFigureFixed")):(t.removeClass("userImgFigureFixed"),t.addClass("userImgFigure"))},e.prototype.parallaxName=function(){var e=document.getElementById("userNameDiv");$(this).scrollTop()<210&&(e.style.left=220-$(this).scrollTop()/3.75+"px");var t=$("#userNameDiv");$(this).scrollTop()>=210?(t.removeClass("userNameDiv"),t.addClass("userNameDivFixed")):(t.removeClass("userNameDivFixed"),t.addClass("userNameDiv"))},e.prototype.posterParalax=function(e){var t=$(e),a=t.find(".shine"),n=t.find('*[class*="layer-"]'),o=t.width(),s=t.height();t.on("mousemove",function(e){$(".mainSection").css({"transform-style":"preserve-3d",transform:"perspective(1000px)"}),$("#imageBack").css({top:"0"});var i=.5-e.pageX/o,d=.5-e.pageY/s,r=e.pageX-o/2,l=e.pageY-s/2,c=180*Math.atan2(l,r)/Math.PI-90,m=t.data("offset"),u="translateY("+-i*m+"px) rotateX("+-d*m+"deg) rotateY("+i*(2*m)+"deg)";t.css("transform",u),c<0&&(c+=360),a.css("background","linear-gradient("+c+"deg, rgba(0, 0, 0,"+e.pageY/s+") 0%,rgba(0, 0, 0, 0) 80%)"),n.each(function(){var e=$(this),t=e.data("offset")||0,a="translateX("+i*t+"px) translateY("+d*t+"px)";e.css("transform",a)})})},e}(),Slide=function(){function e(){}return e.prototype.slideIndex=function(){$(this).scrollTop()<200&&($(".imageShow").next().size()?$(".imageShow").removeClass("imageShow").addClass("imageHide").next().removeClass("imageHide").addClass("imageShow"):($(".imageShow").removeClass("imageShow").addClass("imageHide"),$("#contentSlider #imageDiv div:nth-of-type(1)").removeClass("imageHide").addClass("imageShow")),$(".changeShow").next().size()?$(".changeShow").removeClass("changeShow").addClass("changeHide").next().removeClass("changeHide").addClass("changeShow"):($(".changeShow").removeClass("changeShow").addClass("changeHide"),$("#contentSlider #changeDiv div:nth-of-type(1)").removeClass("changeHide").addClass("changeShow")))},e.prototype.changeIndex=function(e){$(e).on("click",".changeHide",function(){$(".changeShow").removeClass("changeShow").addClass("changeHide"),$(this).removeClass("changeHide").addClass("changeShow");var e=$(this).index();e++,$("#imageDiv .imageShow").removeClass("imageShow").addClass("imageHide"),$("#imageDiv div:nth-of-type("+e+")").removeClass("imageHide").addClass("imageShow")}),$(e).on("click","#previousImage",function(){$(".imageShow").prev().size()?$(".imageShow").removeClass("imageShow").addClass("imageHide").prev().removeClass("imageHide").addClass("imageShow"):($(".imageShow").removeClass("imageShow").addClass("imageHide"),$("#contentSlider #imageDiv div:last-child").removeClass("imageHide").addClass("imageShow"));var e=$(this).parent().find("#imageDiv .imageShow").index("#imageDiv div");e++,$("#changeDiv div").removeClass("changeShow").addClass("changeHide"),$("#changeDiv div:nth-of-type("+e+")").removeClass("changeHide").addClass("changeShow")}),$(e).on("click","#nextImage",function(){$(".imageShow").next().size()?$(".imageShow").removeClass("imageShow").addClass("imageHide").next().removeClass("imageHide").addClass("imageShow"):($(".imageShow").removeClass("imageShow").addClass("imageHide"),$("#contentSlider #imageDiv div:nth-of-type(1)").removeClass("imageHide").addClass("imageShow"));var e=$(this).parent().find("#imageDiv .imageShow").index("#imageDiv div");e++,$("#changeDiv div").removeClass("changeShow").addClass("changeHide"),$("#changeDiv div:nth-of-type("+e+")").removeClass("changeHide").addClass("changeShow")})},e}();